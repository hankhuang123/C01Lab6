{"ast":null,"code":"var _jsxFileName = \"/Users/huangweixiang/Downloads/c01w24lab6/quirknotes/frontend/src/Dialog.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseNote = {\n  title: \"\",\n  content: \"\"\n};\nfunction Dialog({\n  open,\n  initialNote,\n  closeDialog,\n  postNote: postNoteState,\n  patchNote: patchNoteState\n}) {\n  _s();\n  // -- Dialog props --\n  const [note, setNote] = useState(baseNote);\n  const [status, setStatus] = useState(\"\");\n\n  // -- Dialog functions --\n  useEffect(() => {\n    !initialNote && setNote(baseNote);\n    initialNote && setNote(initialNote);\n  }, [initialNote]);\n  const close = () => {\n    setStatus(\"\");\n    setNote(baseNote);\n    closeDialog();\n  };\n\n  // -- Database interaction functions --\n  const postNote = async () => {\n    if (!note || !note.title || !note.content) {\n      return;\n    }\n    setStatus(\"Loading...\");\n    try {\n      await fetch(\"http://localhost:4000/postNote\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          title: note.title,\n          content: note.content\n        })\n      }).then(async response => {\n        if (!response.ok) {\n          setStatus(`Error trying to post note`);\n          console.log(\"Served failed:\", response.status);\n        } else {\n          await response.json().then(data => {\n            postNoteState(data.insertedId, note.title, note.content);\n            //setStatus(\"Note posted!\") // Can be replaced with close(), if you want!\n            close();\n          });\n        }\n      });\n    } catch (error) {\n      setStatus(\"Error trying to post note\");\n      console.log(\"Fetch function failed:\", error);\n    }\n  };\n  const patchNote = async () => {\n    if (!note || !note.title || !note.content || !note._id) {\n      return;\n    }\n    setStatus(\"Loading...\");\n    try {\n      await fetch(`http://localhost:4000/patchNote/${note._id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          title: note.title,\n          content: note.content\n        })\n      }).then(async response => {\n        if (!response.ok) {\n          setStatus(`Error trying to patch note`);\n          console.log(\"Served failed:\", response.status);\n        } else {\n          await response.json().then(() => {\n            patchNoteState(note._id, note.title, note.content);\n            setStatus(\"Note patched!\");\n          });\n        }\n      });\n    } catch (error) {\n      setStatus(\"Error trying to patch note\");\n      console.log(\"Fetch function failed:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"dialog\", {\n    open: open,\n    style: DialogStyle.dialog,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Your note title goes here!\",\n      type: \"text\",\n      value: note.title,\n      maxLength: 30,\n      style: DialogStyle.title,\n      onChange: e => setNote({\n        ...note,\n        title: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Your note content goes here!\",\n      value: note.content,\n      rows: 5,\n      style: DialogStyle.content,\n      onChange: e => setNote({\n        ...note,\n        content: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: DialogStyle.buttonWrapper,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: initialNote ? patchNote : postNote,\n        disabled: !note.title || !note.content,\n        children: initialNote ? 'Patch Note' : 'Post Note'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), status, /*#__PURE__*/_jsxDEV(\"button\", {\n        style: DialogStyle.closeButton,\n        onClick: () => close(),\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s(Dialog, \"pQH8s95QZvx/0UQ0CGgOGbYFrBs=\");\n_c = Dialog;\nexport default Dialog;\nconst DialogStyle = {\n  dialog: {\n    width: \"75%\"\n  },\n  title: {\n    fontSize: \"40px\",\n    display: \"block\",\n    width: \"100%\"\n  },\n  content: {\n    fontSize: \"20px\",\n    display: \"block\",\n    width: \"100%\"\n  },\n  buttonWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: \"10px\"\n  },\n  closeButton: {\n    justifySelf: \"end\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"Dialog\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","baseNote","title","content","Dialog","open","initialNote","closeDialog","postNote","postNoteState","patchNote","patchNoteState","_s","note","setNote","status","setStatus","close","fetch","method","headers","body","JSON","stringify","then","response","ok","console","log","json","data","insertedId","error","_id","style","DialogStyle","dialog","children","placeholder","type","value","maxLength","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","rows","buttonWrapper","onClick","disabled","closeButton","_c","width","fontSize","display","justifyContent","gap","justifySelf","$RefreshReg$"],"sources":["/Users/huangweixiang/Downloads/c01w24lab6/quirknotes/frontend/src/Dialog.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport './App.css';\n\nconst baseNote = {title: \"\", content: \"\"}\n\nfunction Dialog({open, initialNote, closeDialog, postNote: postNoteState, patchNote: patchNoteState}) {\n\n    // -- Dialog props --\n    const [note, setNote] = useState(baseNote)\n    const [status, setStatus] = useState(\"\")\n\n    // -- Dialog functions --\n    useEffect(() => {\n        !initialNote && setNote(baseNote)\n        initialNote && setNote(initialNote)\n    }, [initialNote])\n\n    const close = () => {\n        setStatus(\"\")\n        setNote(baseNote)\n        closeDialog()\n    }\n\n    // -- Database interaction functions --\n    const postNote = async () => {\n        if (!note || !note.title || !note.content) {\n            return \n        }\n\n        setStatus(\"Loading...\")\n\n        try {\n            await fetch(\"http://localhost:4000/postNote\",\n                {method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({title: note.title, content: note.content})} )\n            .then(async (response) => {\n                if (!response.ok) {\n                    setStatus(`Error trying to post note`)\n                    console.log(\"Served failed:\", response.status)\n                } else {\n                    await response.json().then((data) => {\n                        postNoteState(data.insertedId, note.title, note.content)\n                        //setStatus(\"Note posted!\") // Can be replaced with close(), if you want!\n                        close()\n                    }) \n                }\n            })\n        } catch (error) {\n            setStatus(\"Error trying to post note\")\n            console.log(\"Fetch function failed:\", error)\n        } \n    }\n\n    const patchNote = async () => {\n\n        if (!note || !note.title || !note.content || !note._id) {\n            return \n        }\n\n        setStatus(\"Loading...\")\n\n        try {\n            await fetch(`http://localhost:4000/patchNote/${note._id}`,\n                {method: \"PATCH\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({title: note.title, content: note.content})} )\n            .then(async (response) => {\n                if (!response.ok) {\n                    setStatus(`Error trying to patch note`)\n                    console.log(\"Served failed:\", response.status)\n                } else {\n                    await response.json().then(() => {\n                        patchNoteState(note._id, note.title, note.content)\n                        setStatus(\"Note patched!\") \n                    }) \n                }\n            })\n        } catch (error) {\n            setStatus(\"Error trying to patch note\")\n            console.log(\"Fetch function failed:\", error)\n        } \n    }\n\n    return (\n        <dialog open={open} style={DialogStyle.dialog}>\n            <input\n                placeholder=\"Your note title goes here!\"\n                type=\"text\"\n                value={note.title}\n                maxLength={30}\n                style={DialogStyle.title}\n                onChange={(e) => setNote({...note, title: e.target.value})}\n            />\n            <textarea\n                placeholder=\"Your note content goes here!\"\n                value={note.content}\n                rows={5}\n                style={DialogStyle.content}\n                onChange={(e) => setNote({...note, content: e.target.value})}\n            />\n            <div style={DialogStyle.buttonWrapper}>\n                <button\n                    onClick={initialNote ? patchNote : postNote}\n                    disabled={!note.title || !note.content}>\n                    {initialNote ? 'Patch Note' : 'Post Note'}\n                </button>\n                {status}\n                <button\n                    style={DialogStyle.closeButton}\n                    onClick={() => close()}\n                >\n                    Close\n                </button>\n            </div>\n        </dialog>\n    )\n\n}\n\nexport default Dialog;\n\nconst DialogStyle = {\n    dialog: {width: \"75%\"},\n    title: {\n        fontSize: \"40px\", \n        display: \"block\", \n        width: \"100%\"\n    },\n    content: {\n        fontSize: \"20px\", \n        display: \"block\", \n        width: \"100%\"\n    },\n    buttonWrapper: {\n        display: \"flex\", \n        justifyContent: \"space-between\", \n        gap: \"10px\"\n    },\n    closeButton: {justifySelf: \"end\"}\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,EAAEC,SAAS,QAAO,OAAO;AAChD,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnB,MAAMC,QAAQ,GAAG;EAACC,KAAK,EAAE,EAAE;EAAEC,OAAO,EAAE;AAAE,CAAC;AAEzC,SAASC,MAAMA,CAAC;EAACC,IAAI;EAAEC,WAAW;EAAEC,WAAW;EAAEC,QAAQ,EAAEC,aAAa;EAAEC,SAAS,EAAEC;AAAc,CAAC,EAAE;EAAAC,EAAA;EAElG;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAACI,QAAQ,CAAC;EAC1C,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACZ,CAACQ,WAAW,IAAIQ,OAAO,CAACb,QAAQ,CAAC;IACjCK,WAAW,IAAIQ,OAAO,CAACR,WAAW,CAAC;EACvC,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,MAAMW,KAAK,GAAGA,CAAA,KAAM;IAChBD,SAAS,CAAC,EAAE,CAAC;IACbF,OAAO,CAACb,QAAQ,CAAC;IACjBM,WAAW,CAAC,CAAC;EACjB,CAAC;;EAED;EACA,MAAMC,QAAQ,GAAG,MAAAA,CAAA,KAAY;IACzB,IAAI,CAACK,IAAI,IAAI,CAACA,IAAI,CAACX,KAAK,IAAI,CAACW,IAAI,CAACV,OAAO,EAAE;MACvC;IACJ;IAEAa,SAAS,CAAC,YAAY,CAAC;IAEvB,IAAI;MACA,MAAME,KAAK,CAAC,gCAAgC,EACxC;QAACC,MAAM,EAAE,MAAM;QACfC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAACrB,KAAK,EAAEW,IAAI,CAACX,KAAK;UAAEC,OAAO,EAAEU,IAAI,CAACV;QAAO,CAAC;MAAC,CAAE,CAAC,CACtEqB,IAAI,CAAC,MAAOC,QAAQ,IAAK;QACtB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;UACdV,SAAS,CAAE,2BAA0B,CAAC;UACtCW,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,QAAQ,CAACV,MAAM,CAAC;QAClD,CAAC,MAAM;UACH,MAAMU,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACL,IAAI,CAAEM,IAAI,IAAK;YACjCrB,aAAa,CAACqB,IAAI,CAACC,UAAU,EAAElB,IAAI,CAACX,KAAK,EAAEW,IAAI,CAACV,OAAO,CAAC;YACxD;YACAc,KAAK,CAAC,CAAC;UACX,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;IACN,CAAC,CAAC,OAAOe,KAAK,EAAE;MACZhB,SAAS,CAAC,2BAA2B,CAAC;MACtCW,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEI,KAAK,CAAC;IAChD;EACJ,CAAC;EAED,MAAMtB,SAAS,GAAG,MAAAA,CAAA,KAAY;IAE1B,IAAI,CAACG,IAAI,IAAI,CAACA,IAAI,CAACX,KAAK,IAAI,CAACW,IAAI,CAACV,OAAO,IAAI,CAACU,IAAI,CAACoB,GAAG,EAAE;MACpD;IACJ;IAEAjB,SAAS,CAAC,YAAY,CAAC;IAEvB,IAAI;MACA,MAAME,KAAK,CAAE,mCAAkCL,IAAI,CAACoB,GAAI,EAAC,EACrD;QAACd,MAAM,EAAE,OAAO;QAChBC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAACrB,KAAK,EAAEW,IAAI,CAACX,KAAK;UAAEC,OAAO,EAAEU,IAAI,CAACV;QAAO,CAAC;MAAC,CAAE,CAAC,CACtEqB,IAAI,CAAC,MAAOC,QAAQ,IAAK;QACtB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;UACdV,SAAS,CAAE,4BAA2B,CAAC;UACvCW,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,QAAQ,CAACV,MAAM,CAAC;QAClD,CAAC,MAAM;UACH,MAAMU,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACL,IAAI,CAAC,MAAM;YAC7Bb,cAAc,CAACE,IAAI,CAACoB,GAAG,EAAEpB,IAAI,CAACX,KAAK,EAAEW,IAAI,CAACV,OAAO,CAAC;YAClDa,SAAS,CAAC,eAAe,CAAC;UAC9B,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;IACN,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACZhB,SAAS,CAAC,4BAA4B,CAAC;MACvCW,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEI,KAAK,CAAC;IAChD;EACJ,CAAC;EAED,oBACIhC,OAAA;IAAQK,IAAI,EAAEA,IAAK;IAAC6B,KAAK,EAAEC,WAAW,CAACC,MAAO;IAAAC,QAAA,gBAC1CrC,OAAA;MACIsC,WAAW,EAAC,4BAA4B;MACxCC,IAAI,EAAC,MAAM;MACXC,KAAK,EAAE3B,IAAI,CAACX,KAAM;MAClBuC,SAAS,EAAE,EAAG;MACdP,KAAK,EAAEC,WAAW,CAACjC,KAAM;MACzBwC,QAAQ,EAAGC,CAAC,IAAK7B,OAAO,CAAC;QAAC,GAAGD,IAAI;QAAEX,KAAK,EAAEyC,CAAC,CAACC,MAAM,CAACJ;MAAK,CAAC;IAAE;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9D,CAAC,eACFhD,OAAA;MACIsC,WAAW,EAAC,8BAA8B;MAC1CE,KAAK,EAAE3B,IAAI,CAACV,OAAQ;MACpB8C,IAAI,EAAE,CAAE;MACRf,KAAK,EAAEC,WAAW,CAAChC,OAAQ;MAC3BuC,QAAQ,EAAGC,CAAC,IAAK7B,OAAO,CAAC;QAAC,GAAGD,IAAI;QAAEV,OAAO,EAAEwC,CAAC,CAACC,MAAM,CAACJ;MAAK,CAAC;IAAE;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC,eACFhD,OAAA;MAAKkC,KAAK,EAAEC,WAAW,CAACe,aAAc;MAAAb,QAAA,gBAClCrC,OAAA;QACImD,OAAO,EAAE7C,WAAW,GAAGI,SAAS,GAAGF,QAAS;QAC5C4C,QAAQ,EAAE,CAACvC,IAAI,CAACX,KAAK,IAAI,CAACW,IAAI,CAACV,OAAQ;QAAAkC,QAAA,EACtC/B,WAAW,GAAG,YAAY,GAAG;MAAW;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC,EACRjC,MAAM,eACPf,OAAA;QACIkC,KAAK,EAAEC,WAAW,CAACkB,WAAY;QAC/BF,OAAO,EAAEA,CAAA,KAAMlC,KAAK,CAAC,CAAE;QAAAoB,QAAA,EAC1B;MAED;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAGjB;AAACpC,EAAA,CArHQR,MAAM;AAAAkD,EAAA,GAANlD,MAAM;AAuHf,eAAeA,MAAM;AAErB,MAAM+B,WAAW,GAAG;EAChBC,MAAM,EAAE;IAACmB,KAAK,EAAE;EAAK,CAAC;EACtBrD,KAAK,EAAE;IACHsD,QAAQ,EAAE,MAAM;IAChBC,OAAO,EAAE,OAAO;IAChBF,KAAK,EAAE;EACX,CAAC;EACDpD,OAAO,EAAE;IACLqD,QAAQ,EAAE,MAAM;IAChBC,OAAO,EAAE,OAAO;IAChBF,KAAK,EAAE;EACX,CAAC;EACDL,aAAa,EAAE;IACXO,OAAO,EAAE,MAAM;IACfC,cAAc,EAAE,eAAe;IAC/BC,GAAG,EAAE;EACT,CAAC;EACDN,WAAW,EAAE;IAACO,WAAW,EAAE;EAAK;AACpC,CAAC;AAAA,IAAAN,EAAA;AAAAO,YAAA,CAAAP,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}